{% extends "pmpapp/base.html" %}
{% block title %}Conversation{% endblock title %}
{% block content %}
<h1>Conversation</h1>


<div>
    {% for conversation in conversations %}
   

        <div>
            <div>
               
                <div>
                    {% comment %} in python this is the way to access 
                    all data of single field of a model {% endcomment %}
                   {% for message in conversation.messages.all  %}
                   {% comment %} next we write this code to check whether the user 
                   who clicks to view inbox is also user who sent the request {% endcomment %}
                  <div>
                    <p>
                        {{message.created_by.username}} @  {{message.created_at}}
                    </p>
                    <p>
                        {{message.content}} 
                    </p>

                  </div>
                   
                   {% endfor %}
                </div>
            
            </div>

        </div>
        
       
   
    
    {% endfor %}
    <form method="post" action="."> 
        {% csrf_token %}
        {{form.as_p}}
         
    <button>Send</button>
    </form>

</div>
{% endblock content %}